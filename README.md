# 从零实现一个 JSON 解析器（附设计思路与源码）

## 前言

本文将介绍如何在 C++ 中从零实现一个易用、高效、header only、单头文件的 JSON 解析器。

我们将从 JSON 的语法规则出发，逐步搭建 JSON 数据结构与解析器，最终实现序列化与反序列化功能。

整个项目基于 Windows 环境进行开发，但并不运用平台特性，因此基本支持跨平台使用。

### 该文章包含的技术内容：
- 面向对象编程的初级实践
- 手动内存管理的初级实践
- 基本的错误处理机制
- Token 化与词法解析方法的暴力实现
- 易用性接口设计思路与实践
- JSON 数据的流式解析实现
- 小型项目的文件职责拆分与协作

### 该文章不包含的技术内容：
- 高性能多线程解析
- C++ 容器的特性讲解
- 智能指针的使用实践
- 底层并行优化实现
- JSON 语法校验与自修正逻辑
- 跨平台特性的适配处理
- 不必要的设计模式引入

阅读本文，你将能快速掌握自定义 JSON 解析器的设计与实现方法，适合希望理解解析器原理或为项目定制解析逻辑的开发者。

---

## 一、项目背景

JSON 作为一种简便、高可读性的结构化数据传递语言，在游戏、网络、数据处理等领域大量运用。

但 C++ 标准库至今仍未提供一种自动序列化与反序列化 JSON 的手段，第三方库的引入又得引入 cmake 等管理系统或手动管理，过于复杂。

实现一个不依赖第三方库的、单头文件可用的 JSON 解析库，不仅可以提升编程水平，还能在日常使用中复用。

---

## 二、需求分析

### 功能性需求
- 支持完整 JSON 语法解析（对象、数组、字符串、数字、布尔值、null）
- 支持 Unicode 字符（不会在项目中具体写到）
- 提供详细的错误信息
- 提供易用的API

### 非功能性需求
- 易于扩展新的数据类型
- 易于自定义 Token 处理逻辑
- 有良好的解析速度和内存占用

## 三、技术选择

- 编程语言：C++ 17
- STL 使用：
    - `<algorithm>` 用于简化数据处理逻辑
    - `<variant>` 用于存储多类型 JSON 值变量
    - `<string>` 用于数据输入输出、字典键、JSON 字符串
    - `<vector>` 用于数组管理
    - `<map>` 用于构建对象字典
    - `<stdexcept>` 用于自定义报错类型

## 四、